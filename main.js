var conditions = [
    {
        "code": 1000,
        "iconurld": "Sun.svg",
        "iconurln": "Moon.svg",
        "colord": "ffff7f",
        "colorn": "000040"
    },
    {
        "code": 1003,
        "iconurld": "Cloud-Sun.svg",
        "iconurln": "Cloud-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1006,
        "iconurld": "Cloud.svg",
        "iconurln": "Cloud.svg",
        "colord": "b2b2b2",
        "colorn": "000040"
    },
    {
        "code": 1009,
        "iconurld": "Cloud-Sun.svg",
        "iconurln": "Cloud-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1030,
        "iconurld": "Cloud-Sun.svg",
        "iconurln": "Cloud-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1063,
        "iconurld": "Cloud-Drizzle-Alt.svg",
        "iconurln": "Cloud-Drizzle-Moon-Alt.svg",
        "colord": "8ec7ff",
        "colorn": "000040"
    },
    {
        "code": 1066,
        "iconurld": "Cloud-Snow-Sun.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "#f0f8ff",
        "colorn": "000040"
    },
    {
        "code": 1069,
        "iconurld": "Cloud-Snow-Sun.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "#f0f8ff",
        "colorn": "000040"
    },
    {
        "code": 1072,
        "iconurld": "Cloud-Snow-Sun.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "#f0f8ff",
        "colorn": "000040"
    },
    {
        "code": 1087,
        "iconurld": "Cloud-Lightning-Sun.svg",
        "iconurln": "Cloud-Lightning-Moon.svg",
        "colord": "838b8b",
        "colorn": "000040"
    },
    {
        "code": 1273,
        "iconurld": "Cloud-Lightning-Sun.svg",
        "iconurln": "Cloud-Lightning-Moon.svg",
        "colord": "838b8b",
        "colorn": "000040"
    },
    {
        "code": 1276,
        "iconurld": "Cloud-Lightning-Sun.svg",
        "iconurln": "Cloud-Lightning-Moon.svg",
        "colord": "838b8b",
        "colorn": "000040"
    },
    {
        "code": 1279,
        "iconurld": "Cloud-Lightning-Sun.svg",
        "iconurln": "Cloud-Lightning-Moon.svg",
        "colord": "838b8b",
        "colorn": "000040"
    },
    {
        "code": 1282,
        "iconurld": "Cloud-Lightning-Sun.svg",
        "iconurln": "Cloud-Lightning-Moon.svg",
        "colord": "838b8b",
        "colorn": "000040"
    },
    {
        "code": 1114,
        "iconurld": "Cloud-Snow.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1117,
        "iconurld": "Cloud-Snow.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1204,
        "iconurld": "Cloud-Snow.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1207,
        "iconurld": "Cloud-Snow.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1210,
        "iconurld": "Cloud-Snow.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1213,
        "iconurld": "Cloud-Snow.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1216,
        "iconurld": "Cloud-Snow.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1219,
        "iconurld": "Cloud-Snow.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1222,
        "iconurld": "Cloud-Snow.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1225,
        "iconurld": "Cloud-Snow.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1249,
        "iconurld": "Cloud-Snow.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1252,
        "iconurld": "Cloud-Snow.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1255,
        "iconurld": "Cloud-Snow.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1258,
        "iconurld": "Cloud-Snow.svg",
        "iconurln": "Cloud-Snow-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1135,
        "iconurld": "Cloud-Fog.svg",
        "iconurln": "Cloud-Fog-Moon.svg",
        "colord": "c1cdcd",
        "colorn": "000040"
    },
    {
        "code": 1147,
        "iconurld": "Cloud-Fog.svg",
        "iconurln": "Cloud-Fog-Moon.svg",
        "colord": "c1cdcd",
        "colorn": "000040"
    },
    {
        "code": 1150,
        "iconurld": "Cloud-Drizzle.svg",
        "iconurln": "Cloud-Drizzle-Moon.svg",
        "colord": "8ec7ff",
        "colorn": "000040"
    },
    {
        "code": 1153,
        "iconurld": "Cloud-Drizzle.svg",
        "iconurln": "Cloud-Drizzle-Moon.svg",
        "colord": "8ec7ff",
        "colorn": "000040"
    },
    {
        "code": 1168,
        "iconurld": "Cloud-Drizzle.svg",
        "iconurln": "Cloud-Drizzle-Moon.svg",
        "colord": "8ec7ff",
        "colorn": "000040"
    },
    {
        "code": 1171,
        "iconurld": "Cloud-Drizzle.svg",
        "iconurln": "Cloud-Drizzle-Moon.svg",
        "colord": "8ec7ff",
        "colorn": "000040"
    },
    {
        "code": 1180,
        "iconurld": "Cloud-Drizzle.svg",
        "iconurln": "Cloud-Drizzle-Moon.svg",
        "colord": "8ec7ff",
        "colorn": "000040"
    },
    {
        "code": 1183,
        "iconurld": "Cloud-Drizzle.svg",
        "iconurln": "Cloud-Drizzle-Moon.svg",
        "colord": "8ec7ff",
        "colorn": "000040"
    },
    {
        "code": 1186,
        "iconurld": "Cloud-Rain.svg",
        "iconurln": "Cloud-Rain-Moon.svg",
        "colord": "6495ed",
        "colorn": "000040"
    },
    {
        "code": 1189,
        "iconurld": "Cloud-Rain.svg",
        "iconurln": "Cloud-Rain-Moon.svg",
        "colord": "6495ed",
        "colorn": "000040"
    },
    {
        "code": 1192,
        "iconurld": "Cloud-Rain.svg",
        "iconurln": "Cloud-Rain-Moon.svg",
        "colord": "6495ed",
        "colorn": "000040"
    },
    {
        "code": 1195,
        "iconurld": "Cloud-Rain.svg",
        "iconurln": "Cloud-Rain-Moon.svg",
        "colord": "6495ed",
        "colorn": "000040"
    },
    {
        "code": 1198,
        "iconurld": "Cloud-Rain.svg",
        "iconurln": "Cloud-Rain-Moon.svg",
        "colord": "6495ed",
        "colorn": "000040"
    },
    {
        "code": 1201,
        "iconurld": "Cloud-Rain.svg",
        "iconurln": "Cloud-Rain-Moon.svg",
        "colord": "6495ed",
        "colorn": "000040"
    },
    {
        "code": 1240,
        "iconurld": "Cloud-Rain.svg",
        "iconurln": "Cloud-Rain-Moon.svg",
        "colord": "6495ed",
        "colorn": "000040"
    },
    {
        "code": 1243,
        "iconurld": "Cloud-Rain.svg",
        "iconurln": "Cloud-Rain-Moon.svg",
        "colord": "6495ed",
        "colorn": "000040"
    },
    {
        "code": 1246,
        "iconurld": "Cloud-Rain.svg",
        "iconurln": "Cloud-Rain-Moon.svg",
        "colord": "6495ed",
        "colorn": "000040"
    },
    {
        "code": 1237,
        "iconurld": "Cloud-Hail.svg",
        "iconurln": "Cloud-Hail-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1261,
        "iconurld": "Cloud-Hail.svg",
        "iconurln": "Cloud-Hail-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },
    {
        "code": 1264,
        "iconurld": "Cloud-Hail.svg",
        "iconurln": "Cloud-Hail-Moon.svg",
        "colord": "f2f2f2",
        "colorn": "000040"
    },


];
var dataG;
var unit = 0;

$(document).ready(function(){
    if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(function(position) {
             $.ajax({
                 url: "https://api.apixu.com/v1/current.json?key=b864aac56d5848c6885153821181401&q=" + position.coords.latitude + "," + position.coords.longitude,
                 type: "GET",
                 success: function(data){
                     //position.coords.latitude  position.coords.longitude;
                     dataG = data;
                     $("#main-weather").html(data.current.condition.text.toUpperCase());
                     if(unit === 0){
                         $('#temptext').html(data.current.temp_c + "&#176;C");
                     }
                     else{
                         $('#temptext').html(data.current.temp_f + "&#176;F");
                     }
                     $('#humidtext').html(data.current.humidity + "%");
                     $('#windspeedtext').html(data.current.wind_kph + "kph");
                     $('#pressuretext').html(data.current.pressure_mb + "mb");
                     var condition = conditions.find(testForCode);
                     if(data.current.is_day == 1){
                         $(".jumbotron").animate({'background-color': "#" + condition.colord}, 1000);
                         $("#weather-icon").attr("src", "SVG/" + condition.iconurld);
                         $(".change-color-text").animate({'color': "#" + getTextColor(condition.colord)}, 1000);
                     }
                     else{
                         $(".jumbotron").animate({'background-color': "#" + condition.colorn}, 1000);
                         $("#weather-icon").attr("src", "SVG/" + condition.iconurln);
                         $(".change-color-text").animate({'color': "#" + getTextColor(condition.colorn)}, 1000);
                     }


                 }
             });
        });

    }

    $('.btn').click(function(){        
        if(unit === 0){
            unit = 1;
        }
        else{
            unit = 0;

        }
        if(dataG != undefined){
            if(unit === 0){
                $('#temptext').html(dataG.current.temp_c + "&#176;C");
            }
            else{
                $('#temptext').html(dataG.current.temp_f + "&#176;F");
            }
        }

    });

});

function getTextColor(c){
    var r = c.substr(0, 2).toString();
    var g = c.substr(2, 2).toString();
    var b = c.substr(4, 2).toString();

    if(parseInt(r, 16) + parseInt(g, 16) + parseInt(b, 16) > 255/2){
        return "000000";
    }
    else{
        return "ffffff";
    }
}


function testForCode(e){
    if(e.code == dataG.current.condition.code){
        return true;
    }
    else{
        return false;
    }
}
